/*! OpenCrisp BaseJS - v0.6.4 - 2016-03-13
* https://github.com/OpenCrisp/Crisp.BaseJS
* Copyright (c) 2016 Fabian Schmid; Licensed MIT */
!function(a){function b(a){var b=e.call(a).replace(f,"$1");return-1!==g.indexOf(b)&&(b=n),b}function c(a,d){return"field"===d?c(a,m)||c(a,k)||c(a,h)||c(a,i)||c(a,l):b(a)===d}function d(a,b,d){var e=d.args;void 0===e&&(e=d),e=[].concat(e),a.apply(b,e),c(d.complete,j)&&d.complete.apply(b,e)}var e=Object.prototype.toString,f=/^\[object ([a-z]+)\]$/i,g=["global","Null","DOMWindow","Window"],h="Boolean",i="Date",j="Function",k="Number",l="RegExp",m="String",n="Undefined";a.Crisp={ns:function(a,b){var d,e=a.split("."),f=this;d=e.length-1;for(var g=0,h=d;h>g;g+=1)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(b){if(!c(f[e[d]],n))throw new Error("Can't overwrite '"+a+"' of defined!");f[e[d]]=b}else c(f[e[d]],n)&&(f[e[d]]={});return f[e[d]]},utilTick:function(b,c,e,f){return e=e||{},b=b||e.self,e.async&&(f=!0,delete e.async),f?(a.Crisp.nextTick(d,c,b,e),b):(d(c,b,e),b)},to:function(){return JSON.stringify(this)},parse:function(){return JSON.parse(this.toString())},type:function(a){return a?c(this,a):b(this)},math:function(a){var b=[this];return arguments.xEach({start:1},function(a){b.push(a)}),Math[a].apply(Math,b)}}}("undefined"!=typeof process&&"undefined"!=typeof process.title&&"undefined"!=typeof global?global:window),function(a){a.ns("util.control.Break",function(){}),a.ns("util.control.End",function(){}),a.ns("util.control.Noop",function(){})}(Crisp),function(a){function b(a,b,c,d,e){a.call(b,c,d),e.call(b,c)}function c(a,c){function d(c,d,g){var h;return c.async&&(h=c.async,delete c.async),d=d||c.success||e,g=g||c.complete||e,h?f(b,a,this,c,d,g):(a.call(this,c,d),g.call(this,c)),this}return Object.defineProperty(d,"tick",{value:c||!0}),Object.defineProperty(d,"callback",{value:a}),d}function d(a,b){var c,d={};if(Crisp.type.call(b[0],"Object"))return b[0];a=a||[];for(var e=0,f=b.length;f>e;e+=1)c=a[e]||e,d[c]=b[e];return d}var e=a.ns("util.control.Break"),f=function(){return"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick:"function"==typeof setImmediate?setImmediate:function(a){return setTimeout.apply(null,[a,0].concat(Array.prototype.slice.call(arguments).slice(1)))}}();a.nextTick=f,a.utilTack=c,a.callSchema=d}(Crisp),function(a){function b(){for(var c,d=0,e=arguments.length;e>d;d+=1)c=arguments[d],a.type.call(c,"Array")?b.apply(this,c):void 0!==c&&this.push(c);return this}function c(a,b,c){var f,g=0,h=1,i=this.length,j=a.start?Number(a.start):0,k=void 0===a.limit?i:Number(a.limit);for(0>=k&&(k=i),0>j&&(j=i+j),j+k>i&&(k-=j+k-i),0>j&&(j=0,k=i),a.reverse&&(h=-1,j-=i+h);k>g;g+=1)try{f=(g+j)*h,b.call(a.self,this[f],f,c)}catch(l){if(!(l instanceof d)){if(l instanceof e||0>f)return this;throw l}a.limit&&(a.reverse||i>f&&i>k)&&(k+=1)}return this}var d=a.ns("util.control.Break"),e=a.ns("util.control.End"),f=a.utilTack;Object.defineProperty(Array.prototype,"xAdd",{value:b}),a.xEachArray=c,Object.defineProperty(Array.prototype,"xEach",{value:f(c)})}(Crisp),function(){function a(a,b,c){return"undefined"==typeof c||0===+c?Math[a](b):(b=+b,c=+c,isNaN(b)||"number"!=typeof c||c%1!==0?NaN:(b=b.toString().split("e"),b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c))),b=b.toString().split("e"),+(b[0]+"e"+(b[1]?+b[1]+c:c))))}Math.round10||(Math.round10=function(b,c){return a("round",b,c)}),Math.floor10||(Math.floor10=function(b,c){return a("floor",b,c)}),Math.ceil10||(Math.ceil10=function(b,c){return a("ceil",b,c)})}(Crisp),function(a){Number.isInteger=Number.isInteger||function(b){return a.type.call(b,"Number")&&isFinite(b)&&Math.floor(b)===b},Object.defineProperty(Number.prototype,"xMath",{value:a.math})}(Crisp),function(a){function b(a,b,e){var f,g,h=Object.keys(this),i=0,j=1,k=h.length,l=a.start?Number(a.start):0,m=void 0===a.limit?k:Number(a.limit);for(0>=m&&(m=k),0>l&&(l=k+l),l+m>k&&(m-=l+m-k),0>l&&(l=0,m=k),a.reverse&&(j=-1,l-=k+j);m>i;i+=1)try{f=(i+l)*j,g=h[f],b.call(a.self,this[g],g,e)}catch(n){if(!(n instanceof c)){if(n instanceof d||0>f)return this;throw n}a.limit&&(a.reverse||k>f&&k>m)&&(m+=1)}return this}var c=a.ns("util.control.Break"),d=a.ns("util.control.End"),e=a.utilTack;a.xEachObject=b,Object.defineProperty(Object.prototype,"xEach",{value:e(b)}),Object.defineProperty(Object.prototype,"xTo",{value:a.to}),Object.defineProperty(Object.prototype,"xType",{value:a.type}),Object.defineProperty(Object.prototype,"toURLParam",{value:function(){var b=[];return this.xEach({},function(c,d){var e="";e=a.type.call(c,"Object")?c.xTo():a.type.call(c,"Array")?c.xTo():a.type.call(c,"Boolean")?c.xTo():c.toString(),e=d.concat("=",e),b.push(e)}),b.join("&")}})}(Crisp),function(a){var b=/[.*+?^${}()|[\]\\]/g;RegExp.escape=RegExp.escape||function(a){return a.replace(b,"\\$&")},Object.defineProperty(RegExp.prototype,"xTo",{value:function(){return a.to.call(this.toString())}})}(Crisp),function(a){Object.defineProperty(String.prototype,"toMath",{value:a.toMath}),Object.defineProperty(String.prototype,"xMath",{value:a.math}),Object.defineProperty(String.prototype,"xParse",{value:a.parse})}(Crisp);